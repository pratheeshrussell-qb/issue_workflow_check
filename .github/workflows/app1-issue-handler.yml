name: app1-issue-handler

on:
  workflow_dispatch:
    inputs:
      issue_number:
        required: true

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Wait 10s for labels to be applied
        run: sleep 10
      - name: Get updated issue
        id: issue
        env:
          GH_TOKEN: ${{ github.token }}
        run: |
          issue=$(gh api repos/${{ github.repository }}/issues/${{ github.event.inputs.issue_number }})
          echo "issue_body=$(jq -c '[.body]' <<< "$issue")" >> $GITHUB_OUTPUT
        # body will be in md and has to be parsed
      - run: |
          echo "🏗️ Build triggered from Issue #${{ github.event.inputs.issue_number }}"
          echo "Title: ${{ github.event.inputs.issue_title }}"
          echo "Body: ${{ steps.issue.outputs.issue_body }}"
